-- Generated by Shep Compiler
-- App: SupportAI
-- DO NOT EDIT - regenerate from .shep file

CREATE TABLE companys (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE,
  plan VARCHAR(50),
  apiKey VARCHAR(255) UNIQUE,
  createdAt TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE knowledgebases (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  company UUID REFERENCES,
  title VARCHAR(255) NOT NULL,
  content VARCHAR(255) NOT NULL,
  uploadedAt TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE conversations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  company UUID REFERENCES,
  customerId VARCHAR(255) NOT NULL,
  status VARCHAR(50),
  createdAt TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE messages (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  conversation UUID REFERENCES,
  role VARCHAR(50),
  content VARCHAR(255) NOT NULL,
  confidence NUMERIC,
  timestamp TIMESTAMP,
  sentiment VARCHAR(255),
  summary VARCHAR(255),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE escalations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  conversation UUID REFERENCES,
  reason VARCHAR(255),
  assignedAgent VARCHAR(255),
  resolvedAt TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

