# SupportAI - Generated by Shep

This is a full-stack AI-powered customer support application generated from a `.shep` spec file.

## What's Included

### Backend (Python/FastAPI)
- `generated/main.py` - FastAPI entry point
- `generated/routes.py` - API routes for all entities + AI endpoints
- `generated/models.py` - Pydantic models
- `generated/ai_client.py` - Claude/OpenAI integration

### Frontend (TypeScript/React)
- `generated/types.ts` - TypeScript interfaces
- `generated/api.ts` - API client
- `generated/hooks.ts` - React hooks for data fetching + AI
- `generated/ai.ts` - AI-specific client

### Database
- `generated/schema.sql` - PostgreSQL schema

## Quick Start

### 1. Set up API Key

```bash
export ANTHROPIC_API_KEY=your_claude_api_key_here
# or
export OPENAI_API_KEY=your_openai_key_here
export AI_PROVIDER=openai
```

### 2. Run the Backend

```bash
cd generated
chmod +x run.sh
./run.sh
```

Or manually:

```bash
cd generated
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
cd ..
python -m generated.main
```

### 3. Test the API

```bash
# Health check
curl http://localhost:3001/health

# Root endpoint (shows AI is enabled)
curl http://localhost:3001/

# API docs
open http://localhost:3001/docs

# Test AI sentiment analysis
curl -X POST http://localhost:3001/api/ai/message_sentiment \
  -H "Content-Type: application/json" \
  -d '{"content": "I am really frustrated with this service!"}'

# Test AI rule (frustrated customer detection)
curl -X POST http://localhost:3001/api/ai/rule_1 \
  -H "Content-Type: application/json" \
  -d '{"message_content": "This is absolutely terrible! I want a refund NOW!"}'
```

## AI Features

This app demonstrates Shep's AI-as-a-primitive approach:

### AI-Derived Fields
```shep
entity Message:
  fields:
    - sentiment: ai("classify as positive, neutral, or negative")
    - summary: ai("summarize in one sentence")
```

### AI Rules
```shep
rule "Auto-escalate frustrated customers":
  if ai(message.content, "sounds frustrated or angry") → escalate

rule "Flag potential spam":
  if ai(message.content, "looks like spam or marketing") → mark as spam
```

### AI Flow Steps
```shep
flow "Customer asks a question":
  3. ai: search knowledge base for relevant articles
  4. ai: generate answer based on knowledge base context
```

## Regenerate

To regenerate after changing `app.shep`:

```bash
cd /path/to/shepstack
node packages/shep-cli/bin/shep.js compile \
  --input examples/support-ai/app.shep \
  --output examples/support-ai/generated
```

## Architecture

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│   React UI   │────▶│  FastAPI     │────▶│   Claude/    │
│   (hooks.ts) │     │  (routes.py) │     │   OpenAI     │
└──────────────┘     └──────────────┘     └──────────────┘
       │                    │
       │                    ▼
       │             ┌──────────────┐
       │             │  PostgreSQL  │
       │             │  (schema.sql)│
       └────────────▶└──────────────┘
```

## License

Generated by Shep Compiler - Golden Sheep AI
